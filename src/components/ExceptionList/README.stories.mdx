import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';
import dedent from 'ts-dedent';

import { ExceptionList } from '@/polaris-vue';
import NoteMinor from '@icons/NoteMinor.svg';
import CircleCancelMajor from '@icons/CircleCancelMajor.svg';
import DiscountsMajor from '@icons/DiscountsMajor.svg';

<Meta
  title="Components / Lists and tables / Exception List"
  component={ ExceptionList }
  argTypes={{
    items: {
      control: false,
      table: {
        type: {
          summary: null
        },
      },
    },
    default: {
      table: {
        disable: true,
      },
    },
    itemSlot: {
      name: 'item-{index}',
      description: 'Slot for each item description, defined by `index` of item. Starts at 0.',
      table: {
        category: 'Slots',
        type: {
          summary: null,
        },
      },
    },
  }}
/>

export const Template = (args, { argTypes }) => ({
  props: Object.keys(argTypes),
  components: { ExceptionList },
  data() {
    return {
      itemList: [{
        icon: NoteMinor,
      }, {
        icon: CircleCancelMajor,
        status: 'warning',
        title: 'This item does not have a description',
      }, {
        title: 'This is title',
        truncate: true,
        status: 'critical',
      }],
    };
  },
  template: `<ExceptionList :items="itemList">
    <template slot="item-0">This customer is awesome. Make sure to treat them right!</template>
    <template slot="item-2">This order need to be fulfilled ASAP.</template>
  </ExceptionList>`,
});

# Exception List

Use exception lists to help merchants notice important, standout information that adds extra context to a task. Exception lists often consist of a title and description. Each item in the list either has a bullet or icon at the front.

<Canvas>
  <Story
    name="Exception List"
    height="100px"
    parameters={{
      docs: {
        transformSource: (source) => {
          const tmpSource = source
            .replace(/\s*:items='.*'\s*/,' :items="items"')
          const fullSource = dedent`
            ${tmpSource}\n
            import NoteMinor from '@shopify/polaris-icons/dist/svg/NoteMinor.svg';\n
            data() {
              return {
                items: [{
                  icon: NoteMinor,
                }, {
                  icon: CircleCancelMajor,
                  status: 'warning',
                  title: 'This item does not have a description',
                }, {
                  title: 'This is title',
                  truncate: true,
                  status: 'critical',
                }],
              };
            }
          `;
          return fullSource;
        },
      },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Exception List" />
